(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var s=n(1),c=n.n(s),r=n(12),i=n.n(r),a=(n(35),n(36),n(26)),o=n(5),u=n(6),l=n(8),d=n(7),h=(n(37),n(27)),p=n(28),f=n(29),j=(n(40),n(3)),x=(n(41),n(42),n(15)),b=n.n(x),k=n(17),v=n.n(k),y=n(18),m=n.n(y),S=n(2),O=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={value:s.props.value},s.numberInput=c.a.createRef(),s}return Object(u.a)(n,[{key:"increase",value:function(){this.numberInput.current.stepUp(),this.numberInput.current.dispatchEvent(new Event("input",{bubbles:!0}))}},{key:"decrease",value:function(){this.numberInput.current.stepDown(),this.numberInput.current.dispatchEvent(new Event("input",{bubbles:!0}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:this.props.className,children:[this.props.focus&&Object(S.jsx)(b.a,{className:"input-control",onClick:function(){return e.decrease()}}),Object(S.jsx)("input",{ref:this.numberInput,type:"number",value:this.props.value,onChange:function(t){return e.props.onSetInputChange(t)},min:0}),this.props.focus&&Object(S.jsx)(v.a,{className:"input-control",onClick:function(){return e.increase()}})]})}}]),n}(c.a.Component),g=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).setInputReps=c.a.createRef(),s.setInputWeight=c.a.createRef(),s.setInputCheckbox=c.a.createRef(),s}return Object(u.a)(n,[{key:"handleSetInputChange",value:function(){var e=Object(j.a)(Object(j.a)({},this.props.set),{},{reps:this.setInputReps.current.numberInput.current.value,weight:this.setInputWeight.current.numberInput.current.value,checked:this.setInputCheckbox.current.checked});this.props.onSetInputChange(e)}},{key:"toggleCheckbox",value:function(){this.setInputCheckbox.current.checked=!this.props.set.checked,this.setInputCheckbox.current.dispatchEvent(new Event("input",{bubbles:!0}))}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("tr",{className:1!=this.props.focus?"set":"set focus-set",onClick:function(){return e.props.onSetSelected(e.props.set)},children:[Object(S.jsx)("td",{width:"30px",className:"delete-set-button",onClick:function(){return e.props.handleDeleteSet()},children:this.props.focus&&Object(S.jsx)(m.a,{})}),Object(S.jsx)("td",{width:"30px",children:this.props.set.pos+1}),Object(S.jsx)("td",{width:"105px",children:Object(S.jsx)(O,{ref:this.setInputReps,className:"reps ",value:this.props.set.reps,focus:this.props.focus,onSetInputChange:function(){return e.handleSetInputChange()}})}),Object(S.jsx)("td",{width:"105px",children:Object(S.jsx)(O,{ref:this.setInputWeight,className:"weight",value:this.props.set.weight,focus:this.props.focus,onSetInputChange:function(){return e.handleSetInputChange()}})}),Object(S.jsx)("td",{width:"75px",children:Object(S.jsx)("input",{ref:this.setInputCheckbox,type:"checkbox",checked:this.props.set.checked,onChange:function(t){return e.handleSetInputChange()}})})]})}}]),n}(c.a.Component),w=n(19),C=n.n(w),E=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).handleClickOutsideSets=function(e){null!=s.sets.current&&s.sets&&!s.sets.current.contains(e.target)&&s.state.setSelected.id&&s.handleSetDeselected()},s.state={exercise:s.props.exercise,setSelected:{}},s.sets=c.a.createRef(),s}return Object(u.a)(n,[{key:"handleSetDeselected",value:function(){this.updateSet(),this.setState({setSelected:{}})}},{key:"componentDidMount",value:function(){this.getSets(),document.addEventListener("click",this.handleClickOutsideSets)}},{key:"componentDidUpdate",value:function(){this.state.setSelected.id&&this.updateSet()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("click",this.handleClickOutsideSets)}},{key:"getSets",value:function(){var e=this;fetch("/api/retrieve/".concat(this.props.exercise.id,"/sets"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){"Not found."!=t.detail&&e.setState({exercise:Object(j.a)(Object(j.a)({},e.state.exercise),{},{sets:t})})})).catch((function(e){return console.log(e)}))}},{key:"addSet",value:function(){var e=this,t={method:"POST",body:JSON.stringify({exercise:this.state.exercise.id,pos:this.state.exercise.sets.length,weight:0,reps:0}),headers:{"Content-Type":"application/json"}};fetch("/api/add/set",t).then((function(e){return e.json()})).then((function(t){e.setState({exercise:Object(j.a)(Object(j.a)({},e.state.exercise),{},{sets:e.state.exercise.sets.concat(Object(j.a)(Object(j.a)({},t),{},{weight:0,reps:0}))})})})).catch((function(e){return console.log(e)}))}},{key:"updateSet",value:function(){var e=this,t=this.state.exercise.sets.filter((function(t){if(t.id===e.state.setSelected.id)return t}))[0],n={method:"PUT",body:JSON.stringify({exercise:this.state.exercise.id,pos:t.pos,weight:t.weight,reps:t.reps}),headers:{"Content-Type":"application/json"}};fetch("/api/update/set/".concat(this.state.setSelected.id),n).then((function(e){return e.json()})).then((function(e){})).catch((function(e){return console.log(e)}))}},{key:"deleteSet",value:function(e){var t=this;fetch("/api/delete/set/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(n){t.setState({exercise:Object(j.a)(Object(j.a)({},t.state.exercise),{},{sets:t.state.exercise.sets.filter((function(t){if(t.id!=e)return t}))}),setSelected:{}})})).catch((function(e){return console.log(e)}))}},{key:"handleSetSelected",value:function(e){this.state.setSelected.id&&e.id!=this.state.setSelected.id&&this.updateSet(),this.state.setSelected.id!=e.id&&this.setState({setSelected:e})}},{key:"handleSetInputChange",value:function(e){var t=this;this.setState({exercise:Object(j.a)(Object(j.a)({},this.state.exercise),{},{sets:this.state.exercise.sets.map((function(n){return n.id===t.state.setSelected.id?e:n}))})})}},{key:"focusSet",value:function(e){if(null!=this.state.setSelected&&e.id==this.state.setSelected.id)return!0}},{key:"renderSets",value:function(){var e=this,t=[];return this.state.exercise.sets.map((function(n,s){n.pos=s,t.push(Object(S.jsx)(g,{ref:e.set,set:n,focus:e.focusSet(n),onSetSelected:function(t){return e.handleSetSelected(t)},onSetInputChange:function(t){return e.handleSetInputChange(t)},handleDeleteSet:function(){return e.deleteSet(n.id)}},s))})),t}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{className:"exercise-wrapper",children:[Object(S.jsxs)("table",{className:"exercise",children:[Object(S.jsxs)("thead",{children:[Object(S.jsxs)("tr",{className:"exercise-name",children:[Object(S.jsx)("td",{width:"30px",children:Object(S.jsx)("button",{className:"delete-exercise-button",type:"button",onClick:function(){return e.props.onExerciseDeleted(e.props.exercise.id)},children:Object(S.jsx)(C.a,{})})}),Object(S.jsx)("td",{children:this.props.exercise.exercise}),Object(S.jsx)("td",{width:"30px"})]}),Object(S.jsxs)("tr",{className:"exercise-info",children:[Object(S.jsx)("td",{width:"30px"}),Object(S.jsx)("td",{width:"30px",children:"#"}),Object(S.jsx)("td",{width:"105px",children:"Reps"}),Object(S.jsx)("td",{width:"105px",children:"Weight"}),Object(S.jsx)("td",{width:"75px"})]})]}),Object(S.jsx)("tbody",{ref:this.sets,className:"exercise-sets",children:this.state.exercise.sets.length>0&&this.renderSets()})]}),Object(S.jsx)("button",{className:"add-set-button",type:"button",onClick:function(){return e.addSet()},children:"+"})]})}}]),n}(c.a.Component),N=(n(49),function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={muscleGroups:[],exerciseOptions:[],show:!1},s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getMuscleGroups(),this.getExerciseOptions(),this.setState({show:!0})}},{key:"getMuscleGroups",value:function(){var e=this;fetch("/api/muscle_groups_list").then((function(e){return e.json()})).then((function(t){e.setState({muscleGroups:t})}))}},{key:"getExerciseOptions",value:function(){var e=this;fetch("/api/exercise_options_list").then((function(e){return e.json()})).then((function(t){e.setState({exerciseOptions:t})}))}},{key:"closeSelectExercise",value:function(){this.setState({show:!1})}},{key:"render",value:function(){var e=this;return console.log(this.props),Object(S.jsxs)("div",{className:"select-exercise",children:[Object(S.jsx)("div",{className:"muscle-groups-list",children:this.state.muscleGroups.map((function(t,n){return Object(S.jsxs)("details",{children:[Object(S.jsx)("summary",{children:t.name}),e.state.exerciseOptions.map((function(n,s){if(n.muscle_group==t.id)return Object(S.jsx)("div",{onClick:function(){return e.props.onExerciseSelected(n.name)},children:n.name},s)}))]},n)}))}),Object(S.jsx)("button",{type:"button",className:"hide-select-exercise-button",onClick:function(){return e.props.hideSelectExercise()},children:"Close"})]})}}]),n}(c.a.Component)),W=n(20),D=n.n(W),I=n(21),T=n.n(I),M=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={exercises:[],exercisesLoaded:!1,showSelectExercise:!1},s.workout=c.a.createRef(),s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getExercises(this.props.workout),this.setWorkoutElementHeight()}},{key:"setWorkoutElementHeight",value:function(){document.querySelector(".fc-daygrid-day-frame").style.padding="8px 0",this.workout.current.style.height="".concat(document.querySelector(".fc-daygrid-day-frame").offsetHeight-20,"px")}},{key:"getExercises",value:function(e){var t=this;fetch("/api/retrieve/".concat(e,"/exercises"),{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){"Not found."!=e.detail&&t.setState({exercises:e,exercisesLoaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"addExercise",value:function(e){var t=this,n={workout:this.props.workout,exercise:e},s={method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}};fetch("/api/add/exercise",s).then((function(e){return e.json()})).then((function(e){t.setState({exercises:t.state.exercises.concat(e),showSelectExercise:!1})})).catch((function(e){return console.log(e)}))}},{key:"deleteExercise",value:function(e){var t=this;fetch("/api/delete/exercise/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(n){t.setState({exercises:t.state.exercises.filter((function(t){if(t.id!=e)return t}))})})).catch((function(e){return console.log(e)}))}},{key:"showSelectExercise",value:function(){this.setState({showSelectExercise:!0})}},{key:"renderExercises",value:function(){var e=this,t=[];return this.state.exercises.map((function(n,s){t.push(Object(S.jsx)(E,{workout:e.props.date,exercise:n,onExerciseDeleted:function(t){return e.deleteExercise(t)}},s+1))})),t}},{key:"handleHideSelectExercise",value:function(){this.setState({showSelectExercise:!1})}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{ref:this.workout,className:"workout",id:this.props.id,children:[this.state.exercises.length>0&&!this.state.showSelectExercise&&Object(S.jsx)("div",{className:"exercises",children:this.renderExercises()}),!this.state.showSelectExercise&&Object(S.jsxs)("div",{className:"workout-controls",children:[Object(S.jsx)("button",{type:"button",className:"delete-workout-button",onClick:function(){return e.props.deleteWorkout()},children:Object(S.jsx)(D.a,{})}),Object(S.jsx)("button",{type:"button",className:"add-exercise-button",onClick:function(){return e.showSelectExercise()},children:Object(S.jsx)(T.a,{})})]}),this.state.showSelectExercise&&Object(S.jsx)(N,{workout:this.props.workout,onExerciseSelected:function(t){return e.addExercise(t)},hideSelectExercise:function(){return e.handleHideSelectExercise()}})]})}}]),n}(c.a.Component),V=n(22),G=n.n(V),H=n(23),L=n.n(H),R=n(24),F=n.n(R),A=n(25),q=n.n(A),_=function(e){Object(l.a)(n,e);var t=Object(d.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).state={dateSelected:"",workouts:[],calendarLoaded:!1,calendarView:"dayGridMonth",duration:{days:1},titleFormat:{year:"numeric",month:"long"},calendarHeight:""},s.calendar=c.a.createRef(),s}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.getWorkouts(),this.setState({calendarHeight:this.calendarHeight()})}},{key:"getWorkouts",value:function(){var e=this;fetch("/api/workouts_list",{method:"GET",headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(t){e.setState({workouts:t})}),(function(){})).catch((function(e){return console.log(e)}))}},{key:"createWorkout",value:function(){var e=this,t={method:"POST",body:JSON.stringify({date:this.state.dateSelected}),headers:{"Content-Type":"application/json"}};fetch("/api/create/workout",t).then((function(e){return e.json()})).then((function(t){e.setState({workouts:e.state.workouts.concat(t),workoutLoaded:!0})})).catch((function(e){return console.log(e)}))}},{key:"deleteWorkout",value:function(e){var t=this;fetch("/api/delete/workout/".concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then((function(n){t.setState({workouts:t.state.workouts.filter((function(t){if(t.date!=e)return t}))})})).catch((function(e){return console.log(e)}))}},{key:"prev",value:function(){var e=this.calendar.current.getApi();"dayGridMonth"===this.state.calendarView?e.incrementDate({month:-1}):(e.incrementDate({days:-1}),this.setState({dateSelected:this.formatDate(e.getDate(),"yyyy-mm-dd")}))}},{key:"next",value:function(){var e=this.calendar.current.getApi();"dayGridMonth"===this.state.calendarView?e.incrementDate({month:1}):(e.incrementDate({days:1}),this.setState({dateSelected:this.formatDate(e.getDate(),"yyyy-mm-dd")}))}},{key:"changeViewToMonth",value:function(){var e=this;this.setState({dateSelected:"",calendarView:"dayGridMonth",titleFormat:{year:"numeric",month:"long"}},(function(){e.getWorkouts(),e.calendar.current.getApi().changeView("dayGridMonth"),document.querySelector(".calendar-wrapper").style["max-width"]="700px"}))}},{key:"changeViewToWeek",value:function(){var e=this;"dayGridMonth"==this.state.calendarView&&this.setState({calendarView:"dayGrid",duration:this.calculateWeekDuration(),titleFormat:{day:"2-digit",year:"numeric",month:"long"}},(function(){e.calendar.current.getApi().changeView("dayGrid",e.state.dateSelected)}))}},{key:"calculateWeekDuration",value:function(){var e=Math.floor(window.innerWidth/350);return e>7&&(e=7),e>1&&(document.querySelector(".calendar-wrapper").style["max-width"]="".concat(window.innerWidth-64,"px")),{days:e}}},{key:"calendarHeight",value:function(){return this.state.calendarView,this.calculateWeekViewCalendarHeight()}},{key:"calculateMonthViewCalendarHeight",value:function(){if(this.calendar.current)return document.querySelector(".calendar-wrapper").offsetWidth+8}},{key:"calculateWeekViewCalendarHeight",value:function(){if(this.calendar.current){var e=0,t=document.querySelector(".App-header"),n=document.querySelector(".calendar-controls");t&&(e+=t.offsetHeight),n&&(e+=n.offsetHeight);var s=window.document.body.clientHeight-e;return s>700?700:s}}},{key:"formatDate",value:function(e,t){var n={yyyy:e.getFullYear().toString(),mm:e.getMonth()+1,dd:e.getDate().toString()};return t.replace(/yyyy|mm|dd/gi,(function(e){return n[e]}))}},{key:"workoutExists",value:function(e){return this.state.workouts.some((function(t){return t.date===e}))}},{key:"handleDateSelected",value:function(e){var t=this;this.setState({dateSelected:e.dateStr},(function(){"dayGridMonth"===t.state.calendarView?t.changeViewToWeek():t.createWorkout()}))}},{key:"handleSelectWorkout",value:function(e){var t=this;this.setState({dateSelected:e},(function(){"dayGridMonth"==t.state.calendarView&&t.changeViewToWeek()}))}},{key:"renderWorkouts",value:function(e){var t=this;return"dayGrid"==e.view.type?Object(S.jsx)(M,{workout:e.event.startStr,onClick:function(){return t.handleSelectWorkout(e.event.startStr)},deleteWorkout:function(){return t.deleteWorkout(e.event.startStr)}}):this.renderWorkoutLabel(e)}},{key:"renderWorkoutLabel",value:function(e){var t=this,n=this.state.workouts.filter((function(t){if(t.date==e.event.startStr)return t}))[0];return Object(S.jsx)("div",{id:e.event.startStr,className:"workout-label",onClick:function(){return t.handleSelectWorkout(e.event.startStr)},children:this.renderMuscleGroupLabels(n)})}},{key:"renderMuscleGroupLabels",value:function(e){var t=Object(a.a)(new Set(e.exercises.map((function(e){return e.exercise.muscle_group.color})))),n=[];return t.map((function(e,t){n.push(Object(S.jsx)("div",{className:"muscle-group-label",style:{backgroundColor:e}},t))})),n}},{key:"render",value:function(){var e=this;return Object(S.jsxs)("div",{children:[Object(S.jsxs)("div",{className:"calendar-controls",children:[Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{type:"button",onClick:function(){return e.changeViewToMonth()},children:Object(S.jsx)(G.a,{})}),Object(S.jsx)("button",{type:"button",onClick:function(){return e.changeViewToWeek(e.formatDate(new Date,"yyyy-mm-dd"))},children:Object(S.jsx)(L.a,{})})]}),Object(S.jsxs)("div",{children:[Object(S.jsx)("button",{type:"button",onClick:function(){return e.prev()},children:Object(S.jsx)(F.a,{})}),Object(S.jsx)("button",{type:"button",onClick:function(){return e.next()},children:Object(S.jsx)(q.a,{})})]})]}),Object(S.jsx)("div",{className:"calendar-wrapper",children:Object(S.jsx)(h.a,{ref:this.calendar,plugins:[p.a,f.a],initialView:this.state.calendarView,duration:this.state.duration,headerToolbar:{left:"",center:"title",right:""},titleFormat:this.state.titleFormat,dateClick:function(t){return e.handleDateSelected(t)},height:this.state.calendarHeight,events:this.state.workouts,eventContent:function(t){return e.renderWorkouts(t)}})}),this.state.dateSelected&&Object(S.jsx)("div",{className:"calendar-workout-buttons",children:Object(S.jsx)("button",{className:"create-workout-button",type:"button",onClick:function(){return e.createWorkout()},children:"Create Workout"})})]})}}]),n}(c.a.Component);var J=function(){return Object(S.jsxs)("div",{className:"App",children:[Object(S.jsx)("header",{className:"App-header",children:Object(S.jsx)("h1",{children:"workout logger"})}),Object(S.jsx)("main",{className:"App-main",children:Object(S.jsx)(_,{})}),Object(S.jsx)("footer",{className:"App-footer"})]})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,64)).then((function(t){var n=t.getCLS,s=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),s(e),c(e),r(e),i(e)}))};i.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(J,{})}),document.getElementById("root")),P()}},[[51,1,2]]]);
//# sourceMappingURL=main.57efc252.chunk.js.map